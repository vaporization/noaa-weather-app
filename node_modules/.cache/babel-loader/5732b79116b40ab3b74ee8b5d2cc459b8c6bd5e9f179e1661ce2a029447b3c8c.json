{"ast":null,"code":"// packages/react/use-controllable-state/src/useControllableState.tsx\nimport * as React from \"react\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nfunction useControllableState({\n  prop,\n  defaultProp,\n  onChange = () => {}\n}) {\n  const [uncontrolledProp, setUncontrolledProp] = useUncontrolledState({\n    defaultProp,\n    onChange\n  });\n  const isControlled = prop !== void 0;\n  const value = isControlled ? prop : uncontrolledProp;\n  const handleChange = useCallbackRef(onChange);\n  const setValue = React.useCallback(nextValue => {\n    if (isControlled) {\n      const setter = nextValue;\n      const value2 = typeof nextValue === \"function\" ? setter(prop) : nextValue;\n      if (value2 !== prop) handleChange(value2);\n    } else {\n      setUncontrolledProp(nextValue);\n    }\n  }, [isControlled, prop, setUncontrolledProp, handleChange]);\n  return [value, setValue];\n}\nfunction useUncontrolledState({\n  defaultProp,\n  onChange\n}) {\n  const uncontrolledState = React.useState(defaultProp);\n  const [value] = uncontrolledState;\n  const prevValueRef = React.useRef(value);\n  const handleChange = useCallbackRef(onChange);\n  React.useEffect(() => {\n    if (prevValueRef.current !== value) {\n      handleChange(value);\n      prevValueRef.current = value;\n    }\n  }, [value, prevValueRef, handleChange]);\n  return uncontrolledState;\n}\nexport { useControllableState };","map":{"version":3,"names":["React","useCallbackRef","useControllableState","prop","defaultProp","onChange","uncontrolledProp","setUncontrolledProp","useUncontrolledState","isControlled","value","handleChange","setValue","useCallback","nextValue","setter","value2","uncontrolledState","useState","prevValueRef","useRef","useEffect","current"],"sources":["C:\\Users\\saweb\\noaa-weather-app\\node_modules\\@radix-ui\\react-use-controllable-state\\src\\useControllableState.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useCallbackRef } from '@radix-ui/react-use-callback-ref';\n\ntype UseControllableStateParams<T> = {\n  prop?: T | undefined;\n  defaultProp?: T | undefined;\n  onChange?: (state: T) => void;\n};\n\ntype SetStateFn<T> = (prevState?: T) => T;\n\nfunction useControllableState<T>({\n  prop,\n  defaultProp,\n  onChange = () => {},\n}: UseControllableStateParams<T>) {\n  const [uncontrolledProp, setUncontrolledProp] = useUncontrolledState({ defaultProp, onChange });\n  const isControlled = prop !== undefined;\n  const value = isControlled ? prop : uncontrolledProp;\n  const handleChange = useCallbackRef(onChange);\n\n  const setValue: React.Dispatch<React.SetStateAction<T | undefined>> = React.useCallback(\n    (nextValue) => {\n      if (isControlled) {\n        const setter = nextValue as SetStateFn<T>;\n        const value = typeof nextValue === 'function' ? setter(prop) : nextValue;\n        if (value !== prop) handleChange(value as T);\n      } else {\n        setUncontrolledProp(nextValue);\n      }\n    },\n    [isControlled, prop, setUncontrolledProp, handleChange]\n  );\n\n  return [value, setValue] as const;\n}\n\nfunction useUncontrolledState<T>({\n  defaultProp,\n  onChange,\n}: Omit<UseControllableStateParams<T>, 'prop'>) {\n  const uncontrolledState = React.useState<T | undefined>(defaultProp);\n  const [value] = uncontrolledState;\n  const prevValueRef = React.useRef(value);\n  const handleChange = useCallbackRef(onChange);\n\n  React.useEffect(() => {\n    if (prevValueRef.current !== value) {\n      handleChange(value as T);\n      prevValueRef.current = value;\n    }\n  }, [value, prevValueRef, handleChange]);\n\n  return uncontrolledState;\n}\n\nexport { useControllableState };\n"],"mappings":";AAAA,YAAYA,KAAA,MAAW;AACvB,SAASC,cAAA,QAAsB;AAU/B,SAASC,qBAAwB;EAC/BC,IAAA;EACAC,WAAA;EACAC,QAAA,GAAWA,CAAA,KAAM,CAAC;AACpB,GAAkC;EAChC,MAAM,CAACC,gBAAA,EAAkBC,mBAAmB,IAAIC,oBAAA,CAAqB;IAAEJ,WAAA;IAAaC;EAAS,CAAC;EAC9F,MAAMI,YAAA,GAAeN,IAAA,KAAS;EAC9B,MAAMO,KAAA,GAAQD,YAAA,GAAeN,IAAA,GAAOG,gBAAA;EACpC,MAAMK,YAAA,GAAeV,cAAA,CAAeI,QAAQ;EAE5C,MAAMO,QAAA,GAAsEZ,KAAA,CAAAa,WAAA,CACzEC,SAAA,IAAc;IACb,IAAIL,YAAA,EAAc;MAChB,MAAMM,MAAA,GAASD,SAAA;MACf,MAAME,MAAA,GAAQ,OAAOF,SAAA,KAAc,aAAaC,MAAA,CAAOZ,IAAI,IAAIW,SAAA;MAC/D,IAAIE,MAAA,KAAUb,IAAA,EAAMQ,YAAA,CAAaK,MAAU;IAC7C,OAAO;MACLT,mBAAA,CAAoBO,SAAS;IAC/B;EACF,GACA,CAACL,YAAA,EAAcN,IAAA,EAAMI,mBAAA,EAAqBI,YAAY,CACxD;EAEA,OAAO,CAACD,KAAA,EAAOE,QAAQ;AACzB;AAEA,SAASJ,qBAAwB;EAC/BJ,WAAA;EACAC;AACF,GAAgD;EAC9C,MAAMY,iBAAA,GAA0BjB,KAAA,CAAAkB,QAAA,CAAwBd,WAAW;EACnE,MAAM,CAACM,KAAK,IAAIO,iBAAA;EAChB,MAAME,YAAA,GAAqBnB,KAAA,CAAAoB,MAAA,CAAOV,KAAK;EACvC,MAAMC,YAAA,GAAeV,cAAA,CAAeI,QAAQ;EAEtCL,KAAA,CAAAqB,SAAA,CAAU,MAAM;IACpB,IAAIF,YAAA,CAAaG,OAAA,KAAYZ,KAAA,EAAO;MAClCC,YAAA,CAAaD,KAAU;MACvBS,YAAA,CAAaG,OAAA,GAAUZ,KAAA;IACzB;EACF,GAAG,CAACA,KAAA,EAAOS,YAAA,EAAcR,YAAY,CAAC;EAEtC,OAAOM,iBAAA;AACT","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}